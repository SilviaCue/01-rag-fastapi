Autor desconocido2020-05-07T11:14:10Autor desconocido2020-05-06T16:47:15.415000000Revisar en todo el doc el estilo de cuerpo de texto. Sobre todo la alineación a la izdaAutor desconocido2020-05-07T11:10:04      Autor desconocido2020-05-07T11:09:15                           Autor desconocido2020-05-07T11:09:46Autor desconocido2020-05-07T11:09:45                                  Autor desconocido2020-05-07T11:09:58Autor desconocido2020-05-07T11:11:42Autor desconocido2020-05-07T11:11:37CREATE OR REPLACE VIEW carto.v101d_comarcas AS SELECT *   FROM carto.t101d_comarcas;Autor desconocido2020-05-07T11:08:48Autor desconocido2020-05-06T16:45:03.478000000Incluir ejemploAutor desconocido2020-05-07T11:13:52Manual Básico de pgAdmin	 ÍNDICEINTRODUCCIÓN	31. pgAdmin III	31.1. Nueva conexión.	31.2. Como crear una tabla.	41.3. Como truncar una tabla.	71.4. Como borrar una tabla.	81.5. Como cargar registros en una tabla de forma manual.	91.6. Como cargar registros en una tabla de forma automatizada o semiautomatizada.	111.7. Como añadir campos a una tabla.	111.8. Como editar un registro.	131.9.  Como dar permisos o privilegios de lectura.	131.10. Como dar permisos o privilegios de lectura y edición.	141.11. Como crear una vista alfanumérica.	151.12. Como hacer backup.	151.13. Como hacer restore de backup.	17INTRODUCCIÓNpgAdmin es un software visual libre y de código abierto que permite conectarse a bases de datos PostgreSQL.El objetivo del presente documento es elaborar un manual básico de como manejar las principales herramientas de dicho software y para ello se ha utilizado la versión pgAdmin III.Todas las operaciones que se quieran realizar se pueden hacer mediante consultas de código SQL, así que se explicará tanto para realizar por la interfaz gráfica que ofrece el propio programa como la consulta que se tendría que ejecutar para realizar dicha operación.pgAdmin IIIDicho programa se puede descargar de la siguiente pagina web https://www.pgadmin.org/download/pgadmin-3-windows/. Nueva conexión.Una vez instalado el programa, lo primero que hay que hacer es una nueva conexión a la base de datos. Para ello, hay que hacer click, en el icono del enchufe, o sino seleccionando en el menú Archivo → Añadir servidor.Se abrirá una ventana emergente en donde saldrán los parámetros para configurar una nueva conexión.Figura 1: Configurar nueva conexiónLos parámetros a configurar son los siguientes:Nombre: es el nombre de la conexión que se le quiera dar.Servidor: es donde se encuentra alojado la base de datos a la que se quiere conectar. Puede ser una dirección, una IP etc. Si trabajamos en nuestro propio ordenador, se pondrá localhost.Nombre de usuario: nombre del usuario de la base de datos.Contraseña: contraseña del usuario de la base de datos.Los demás parámetros se dejan por defecto.Crear una tabla.Para crear una tabla nueva se clicka con el botón de derecho en Tablas y Nueva Tabla. Se abrirá una nueva ventana en la que habrá que configurar los parámetros de la tabla (Figura 3: Configurar nueva tabla)Figura 2: Crear tablaFigura 3: Configurar nueva tablaSe le da nombre a la tabla y se selecciona el propietario y en la pestaña columnas se definen los campos que va a tener la tabla, y esto se explica mejor en el apartado Añadir campos a una tabla..También se puede crear una tabla mediante consultas SQL, abriendo una nueva ventana (icono de una lupa con las letras SQL). Figura 4: Abrir ejecutor de consultas SQLLa siguiente consulta se muestra a modo de ejemplo para crear una nueva tabla:CREATE TABLE <<tabla>>  (<<nombre_columna>> <<tipo de dato>> NOT NULL DEFAULT,  <<nombre_columna>> <<tipo de dato>>,  <<nombre_columna>> <<tipo de dato>>,  <<nombre_columna>> <<tipo de dato>>);ALTER TABLE <<tabla>> OWNER TO <<usuario>>;Figura 5:  Ejecutor de consultas SQLTruncar una tabla.Truncar una tabla significa que vaciar de contenido (filas), es decir, que de esa tabla se va a mantener la estructura pero los datos se van a eliminar. Para ello se puede realizar de dos formas:La primera y más sencilla, es ir a la tabla y clickar con el botón derecho del ratón y seleccionar Truncar. Si hay objetos que dependen de esa tabla, como una vista, no dejará truncar dicha tabla, sino que habría que seleccionar Truncar en cascada, y esta opción no es para nada recomendable ya que pueden depender otros objetos de esa vista y se eliminarían sus datos.Figura 6: Truncar tablaLa segunda opción, es abrir una ventana de consultas SQL y poner:TRUNCATE TABLE <<tabla>>;Borrar una tabla.A diferencia con Truncar, Borrar una tabla significa que de esta tabla se van a borrar tanto los datos como la estructura, es decir, se borra la tabla por completo y se puede realizar de dos formas:La primera es ir a la tabla y clickar con el botón derecho del ratón y seleccionar Borrar/Eliminar. Si hay objetos que dependen de esa tabla, como una vista, no dejará borrar dicha tabla, sino que habría que seleccionar Eliminar en cascada, y esta opción es muy peligrosa ya que pueden depender otros objetos de esa vista y se eliminarían todos ellos.Figura 7: Eliminar  tablaLa segunda opción, es abrir una ventana de consultas SQL (icono de una lupa con las letras SQL) y poner:DROP TABLE <<tabla>>;Cargar registros en una tabla de forma manual.En el caso de que a una tabla se quieran añadir uno o dos registros se utilizará este método, sino se usará el explicado en el apartado siguiente.Para ello, desde el programa pgAdmin, se selecciona la tabla y se le da al icono Ver datos del objeto seleccionado y se abrirá una nueva ventana mostrando el contenido de la tabla:Figura 8: Mostrar los datos de tablaFigura 9: Tabla t101d_provinciasUna vez abierta, en la ultima fila, se ve que se puede rellenar los huecos vacíos, y pulsando intro, se habrá añadido una nueva fila. Si hay algún campo que no tiene que ser nulo, saltará una alerta y hasta que no se rellene, no se guardará la fila.Cargar registros en una tabla de forma automatizada o semiautomatizada.En el caso de que a una tabla se quieran añadir múltiples registros, se utilizará este método. Para ello hay que abrir una consola de consultas SQL y ejecutar las consultas que previamente se han estado preparando, teniendo en cuenta los campos que se quieren añadir de la tabla (no tienen porque ser todos). Autor desconocido2020-05-06T16:40:38.462000000RevisarUn ejemplo de consulta SQL para añadir más campos a la tabla visor_capas_atributos sería:INSERT INTO carto.visor_capas_atributos (capa_toc, capa_wfs, campo, etiqueta, orden, "mainField", pk_capa) VALUES (NULL, NULL, 'aereodesc', 'ACCESO AÉREO', NULL, false, 358);INSERT INTO carto.visor_capas_atributos (capa_toc, capa_wfs, campo, etiqueta, orden, "mainField", pk_capa) VALUES (NULL, NULL, 'terrestred', 'ACCESO TERRESTRE', NULL, false, 358);INSERT INTO carto.visor_capas_atributos (capa_toc, capa_wfs, campo, etiqueta, orden, "mainField", pk_capa) VALUES (NULL, NULL, 'detenccion', 'FECHA', NULL, false, 359);INSERT INTO carto.visor_capas_atributos (capa_toc, capa_wfs, campo, etiqueta, orden, "mainField", pk_capa) VALUES (NULL, NULL, 'idpif', 'Nº DE PARTE', NULL, false, 359);INSERT INTO carto.visor_capas_atributos (capa_toc, capa_wfs, campo, etiqueta, orden, "mainField", pk_capa) VALUES (NULL, NULL, 'nombre', 'NOMBRE', NULL, true, 360);INSERT INTO carto.visor_capas_atributos (capa_toc, capa_wfs, campo, etiqueta, orden, "mainField", pk_capa) VALUES (NULL, NULL, 'deteccion', 'FECHA', NULL, false, 360);Añadir campos a una tabla.Para añadir campos a una tabla ya existente, basta con seleccionar la tabla y clickar con el botón derecho y seleccionar Propiedades. Se abrirá una ventana emergente y en la pestaña columnas (Figura 10: Propiedades de la tabla t101_municipios) clickar en Añadir y se abrirá otra nueva ventana en donde se podrá configurar el nuevo campo o columna (Figura 11: Nueva columna de la tabla t101_municipios)Figura 10: Propiedades de la tabla t101_municipiosFigura 11: Nueva columna de la tabla t101_municipiosLos campos a rellenar son los siguientes:Nombre: es el nombre del campo que se le quiera dar.Tipo de Dato: si es un dato numérico, alfanumérico, booleano etc.         Los otros campos como longitud o precisión hacen referencia a que se puede limitar un dato alfanumérico a un determinado numero de caracteres.	También se puede añadir un registro nuevo mediante consultas SQL, utilizando como ejemplo el siguiente:ALTER TABLE <<tabla>>ADD <<nombre_columna>> <<tipo de dato>>;Editar un registro.	Si se quiere modificar un registro existente en la tabla, hay que hacer los mismos pasos que en el punto Cargar registros en una tabla de forma manual. pero en vez de añadir un nuevo campo, modificar el ya existente seleccionando el campo y cambiando lo que se quiera.	También se puede editar un registro usando consultas SQL con el siguiente código:UPDATE <<tabla>>  SET <<campo>> = '<<nombre del nuevo campo>>' WHERE <<condición si es necesaria>> ; Dar permisos o privilegios de lectura.Dar permiso de lectura a una determinada tabla significa que un usuario, que no es propietario de dicha tabla, puede tener acceso a ver el contenido de la tabla. Para ello, selecciona la tabla y clickar con el botón derecho y seleccionar Propiedades. Se abrirá una ventana emergente y en la pestaña Privilegios (Figura 12: Privilegios de la tabla t101_municipios) se selecciona el Rol (usuario) al que se le quiere dar permiso y si es de lectura hay que clickar donde pone SELECT.Figura 12: Privilegios de la tabla t101_municipiosMediante consulta SQL se utilizaría el siguiente ejemplo:GRANT SELECT ON <<tabla>> TO <<rol>>;Dar permisos o privilegios de lectura y edición.Al igual que en apartado anterior, lo único que varáa es a la hora de seleccionar los privilegios hay que clickar en SELECT y en INSERT, así se podrá leer la tabla y editarla. Hay más campos, como UPDATE el cual permite añadir columnas a la tabla o DELETE el cual permite eliminar dicha tabla, así que cuidado con los permisos que se atribuyen a otros usuarios.Mediante consulta SQL si se quiere dar todos los permisos posibles:GRANT ALL ON <<tabla>> TO <<rol o usuario>>;Crear una vista alfanumérica.Una vista es como una tabla virtual que almacena una consulta como un objeto para utilizarse posteriormente.Entonces para crear una vista hay que utilizar una consulta SQL: CREATE OR REPLACE VIEW carto.v101d_comarcas AS  SELECT * FROM carto.t101d_comarcas;En la consulta anterior, el * significa que se van a tomar todos los campos de la tabla existentes. En el caso de que solo se quieran coger unos determinados campos, hay que definirlos en la consulta tras el SELECT y antes del FROM. Un ejemplo seria: CREATE OR REPLACE VIEW carto.v101d_comarcas AS  SELECT t101d_comarcas.objectid,    t101d_comarcas.c_comarca,    t101d_comarcas.d_comarca,    t101d_comarcas.shape FROM carto.t101d_comarcas;Hacer backup (exportación).Un backup es una copia de seguridad que permite guardar de forma muy fácil, desde una tabla a una base de datos incluyendo todos sus elementos como pueden ser tablas, vistas, secuencias, funciones, etc. Esta función sirve tanto para realizar una copia en sí de una base de datos, para volver a un estado anterior si se ha estado manipulando y los resultados no son los esperados, o para trasladar tablas de una base datos a otra.Para ello solo hay que ponerse encima de la tabla que se quiere guardar y clickar con el botón derecho y pulsar en Resguardo.Figura 13: Resguardo de tablaY se abrirá una ventana emergente donde se podrán configurar el resguardo:Figura 14: Resguardo de la tabla t101e_municipiosEn nombre del archivo, se puede seleccionar la ubicación en donde se quiere guardar el archivo así como nombrarlo, siempre con extensión .backup y formato Tar.En las otras pestañas, existen muchas opciones como solo guardar la estructura de la tabla, o solo los datos de la misma, no guardar el propietario etc.En la pestaña objetos, si se quiere guardar mas de una tabla, aquí es donde hay que seleccionar todas las tablas que se quieran guardar.Figura 15: Objetos de resguardo	Y para terminar solo hay que darle al botón Resguardo. Si todo ha ido correctamente en la ventana no saldrá ningún error y con código 0.Recuperación de backup (importación).Una vez creado en el paso anterior un archivo .backup, para poder cargarlo en una base de datos nueva, o restaurar las mismas tablas solo hay que seleccionar la tabla en cuestión, o el nuevo esquema de destino, clickar con el botón derecho y seleccionar Restaurar.Figura 16: Restaurar tabla	Se abrirá una ventana emergente, en la cual hay que seleccionar el archivo .backup que se quiere restaurar y darle a RestaurarFigura 17: Restaurar tabla t101e_municipios	Si todo hay ido correctamente, no saldrá ningún mensaje de error.