Manual de aplicación: Test de Geometrías	ÍNDICE1. INTRODUCCIÓN A LA APLICACIÓN	31. Definición y utilidad	32. Ubicación de la aplicación	32. MANUAL PARA USUARIOS	31. Objetivo	32. Uso de la aplicación	32.1. Selección de la capa objetivo	32.2. Procedimiento de revisión	42.3. Cambiar de test	53. MANUAL PARA ADMINISTRADORES	61. Objetivo	62. Configuración de los test	62.1. Localización de la tabla de configuración	62.2. Configuración del test	63. Supervisión de las decisiones tomadas	73.1. Localización de la tabla de las decisiones	73.2. Estructura de la tabla	71. INTRODUCCIÓN A LA APLICACIÓNDefinición y utilidadLa aplicación Test de Geometrías sirve para revisar visualmente todas las geometrías de una capa sobre un fondo (topográfico, imagen de satélite...). Facilita el trabajo de revisión al quedar registro de los elementos ya trabajados, y siendo más fácil su manejo que en un SIG de escritorio (evita tener que cargar el fondo, controla los ya procesados…).Ubicación de la aplicaciónLa aplicación está disponible en la Plataforma de Servicios y Aplicaciones de IGEAR (PSA), tanto en desarrollo como en producción. Es necesario acceder con el usuario y la clave personal.  Dentro de la PSA, en el apartado de Geodatos, ya aparece el acceso a la aplicación “Test de Geometrías” (https://icearagondes.aragon.es/testGeometrias/index,  https://icearagon.aragon.es/testGeometrias/index)2. MANUAL PARA USUARIOSObjetivoEl objetivo de los usuarios de esta aplicación es revisar de manera visual los elementos que componen una capa (puntos, líneas o polígonos) almacenada en base de datos. Este proceso se lleva acabo sobre un fondo determinado -que puede ser: imágen de satélite, topográfico…-. En base a lo observado y comparado entre este y la capa objetivo, se debe tomar una decisión.Uso de la aplicaciónSelección de la capa objetivoTras haber accedido a la aplicación “Test de Geometrías” (desde PSA, desarrollo o producción), es necesario seleccionar la capa sobre la que se quiere llevar a cabo la revisión, e ‘Iniciar test’. Si la capa objetivo no está disponible en el desplegable, será necesario configurarla (ver apartado 3 de Manual para Administradores).Figura 1: selección de capas de la aplicaciónProcedimiento de revisiónEn primer lugar, hay que seleccionar el fondo sobre el que se quiere trabajar -topográfico u ortofoto-. Posteriormente se puede ir cambiando si es necesario.La geometría a corregir aparece en el recuadro de visualización representada de color azul. Conserva la forma de origen: punto, línea o polígono. Figura 2: visualización para revisar las geometríasEn la parte superior se indica el número de geometrías que quedan pendientes de revisar; e inmediatamente debajo de estas se muestra la información referida a la geometría que se está mostrando en la imagen.Viendo la geometría objetivo sobre el fondo es necesario tomar una decisión:Correcta (verde) → la geometría es acertada. Pasa automáticamente a la siguiente.Duda (amarillo) → la geometría genera dudas al usuario revisor a cerca de si es apropiada o no. Pasa automáticamente a la siguiente.Incorrecta (rojo) → la geometría es errónea. Pasa automáticamente a la siguiente.Saltar → está la opción de pasar a la siguiente geometría sin evaluar la presentePara ayudar al revisor, se dispone además del botón ‘Ver en Visor’. Este abre otra pestaña que redirige al Visor 2D. Muestra en rojo la geometría objetivo, y pone a disposición del usuario todas las utilidades del mismo: permite probar otros fondos, cargar otras capas para comparar...Figura 3: visualización de la geometría objetivo desde Visor 2DEn la parte inferior de la aplicación de “Test de Geometrías” se indica la tabla de base de datos en la que se guardan estas decisiones tomadas. También se da la opción de descargar un archivo .csv que contiene esta misma información.Cambiar de testSi se está revisando una capa, y posteriormente se quiere cambiar a otra, desde el desplegable de la parte superior se cambia la capa objetivo y se ‘Inicia test’.3. MANUAL PARA ADMINISTRADORESObjetivoEl objetivo de los administradores es configurar los test es decir, las capas (puntos, líneas o polígonos) de base de datos a revisar por los usuarios. La configuración se lleva a cabo mediante la edición de tablas albergadas en bases de datos.Configuración de los testLocalización de la tabla de configuraciónLa tabla en la cuál se configuran los diferentes test es test_geom_config. Esta esta almacenada en la base de datos BDIdearagon, en el esquema carto, tanto en los entornos de desarrollo (biv-02) como en producción (bov-03).Configuración del testEn esta tabla hay diversos campos a rellenar (opcionales solo los que lo indica):pk → número correlativo.tabla → capa objetivo sobre la que se quiere hacer la revisión. Indicar esquema.nombretabla. Si se está trabajando en desarrollo, este punto aunque no se especifique, tomará las capas de desarrollo. E igual para producción.conexion_bd → nombre del esquema que tendrá permisos para ver/editar la tabla que se generará y que almacenará las decisiones tomadas por los usuariosfiltro → opcional. Permite hacer un filtro con SQL (solo el WHERE) sobre los atributos de la tabla.campo_geom → indicar el nombre del campo que almacena la geometría. Habitualmente shape  o geom.patron_url_visor → rellenar con la URL del Visor 2D de la capa activa + QUERY. Se presenta un ejemplo a continuación, donde aparecen resaltados los segmentos a cambiar: https://idearagondes.aragon.es/visor/index.html?ACTIVELAYER=NOMBREDELACAPA&VISIBLELAYERS=NOMBREDELACAPA&QUERY=CAMPOUNÍVOCO=<<CAMPOUNÍVOCO>> . No es necesario que la capa este subida al visor.campo_pk → nombre del campo de la capa objetivo que es identificador único. La aplicación irá pasando por cada uno de los diferentes registros que haya.tabla_test → tabla sobre la que se va a almacenar la información de las decisiones tomadas por los usuarios. Indicar esquema.nombretabla.  Si se está trabajando en desarrollo, la tabla se almacenará en desarrollo aunque no se especifique. E igual para producción. Hay que recordar que a esta solo tendrá permisos de visualización y edición el esquema mencionado en el campo conexion_bd.campo_label → nombre del campo que contiene información sobre las geometrías a representar. Aparecerá en la parte superior de la aplicación de “Test de geometrías” junto con el campo_pk.Figura 4: tabla test_geom_config en DesarrolloUna vez se hayan guardado los cambios, si se han rellenado los campos correctamente, aparecerá el nuevo test disponible en la aplicación.Supervisión de las decisiones tomadasLocalización de la tabla de las decisionesLoa tabla que almacena las decisiones tomadas es visible y editable desde el esquema configurado en el campo conexion_bd en la tabla  test_geom_config. El nombre de la tabla y el esquema donde se almacena será igual al contenido del campo tabla_test de la tabla  test_geom_config. Otra opción es entrar desde la propia aplicación. Se entra al test de interés y en el apartado de “Descargar .csv” se descarga la tabla con la información de las decisiones tomadas. Es igual a la tabla de la base de datos.Estructura de la tablaLa tabla que se genera para almacenar las decisiones tiene las siguientes columnas, independientemente del test que se aplique:test_id → hace referencia al pk de la tabla test_geom_config del cuál es resultado esta tablapk → se relaciona directamente con el campo_pk de la tabla test_geom_config. Es el identificador único de la capa original. Permite relacionar la información de partida con las decisiones tomadas para cada una de las geometrías.correcta → será True, cuando en la aplicación se haya marcado como “Correcta” la geometría. Será False, para aquellas etiquetadas como “Incorrectas”. Finalmente, será [null], para las “Duda”.usuario → correo corporativo del Gobierno de Aragón del usuario que ha tomado la decisiónfecha → momento en el que se ha realizado la revisión de esa geometría.Esta tabla se va complementado automáticamente conforme se van tomando decisiones desde la aplicación. Permite de esta manera revisar aquellas geometrías que lo requieran, y aclarar aquellas que han quedado en “Duda”.Figura 5: ejemplo de tabla de decisiones test_v_aeros_funcionamiento

Paso 1: Sin título
idearium


Paso 1: Descarga
idearium
Descarga la aplicación idearium

Paso 2: Registro
idearium
Regístrate o inicia sesión

Paso 3: Explorar
idearium
Explora los diferentes proyectos disponibles

Paso 4: Seleccionar
idearium
Selecciona un proyecto que te interese

Paso 5: Participar
idearium
Participa en el proyecto, ya sea aportando ideas o votando

Paso 1: Abrir el Visor 2D
GOBIERNO DE ARAGON ICEARAGON > APLICACIONES > VISOR VISOR 2D
Navegar al Visor 2D a través del sitio web del Gobierno de Aragón.

Paso 2: Seleccionar Capas
Tabla de contenidos Capas Fondos + Añadir Capa consultable: -- Ninguna -- Transparencia:
En la "Tabla de contenidos", ir a la pestaña "Capas" y usar el menú desplegable para seleccionar la capa deseada si está disponible. Ajustar la transparencia si es necesario.

Paso 3: Capas de usuario
BOA del día 26/02/2025 Eliminar Capas de usuario Exonimia | Toponimia Mapa Topográfico 1:5.000 | Edificaciones Red Transporte | Vias rápidas | Carreteras | Ferrocarril Red hidrográfica Límites | Núcleos de población Límites | Comunidades Autónomas Límites | Aragón, Provincias, Comarcas, Municipios y otras unidades administrativas Callejero | Calles y Números de Portal Topónimo Aeros funcionamiento TEST GEOM
Activar o desactivar las capas de usuario marcando las casillas de verificación correspondientes. Eliminar las capas de usuario no deseadas haciendo clic en el botón "Eliminar" si es necesario.

Paso 4: Visualizar el mapa
Noguera Santa Baja Zaragoza Sarda Baja
El mapa mostrará las capas seleccionadas con la ubicación y los detalles relevantes como nombres de lugares.

Paso 5: Herramientas adicionales
RJT
Utilizar las herramientas adicionales disponibles en la barra de herramientas superior, como la herramienta "RJT" (suponiendo que significa Red de Justicia Territorial), para realizar las acciones necesarias.

Paso 6: Otras opciones
3D
Explorar otras opciones como la vista 3D, si está disponible, utilizando los iconos en el lado derecho de la pantalla.

Paso 1: Título del paso 1
Idearium
Consultores
Descripción del paso 1

Paso 1: Iniciar test
TEST GEOMETRÍAS
Capa
geopub.v_aeros_funcionamiento
2979 geometrías pendientes de revisión
Plana de la Balsa (Clave primaria=59933)
Iniciar test
Ver en visor
Topográfico Ortofoto
María de Huerva
María de Huerva
Cadrete
Zaragoza
Zaragoza
María de Huerva
María de Huerva
Zaragoza
María de Huerva
✓ Correcta
? Duda
▲ Incorrecta
Resultado registrado en carto.test_v_aeros_funcionamiento
Descargar .csv
►►► Saltar
Se muestra la interfaz de la aplicación "Test Geometrías" del Gobierno de Aragón. Se observa un mapa con geometrías a revisar, opciones para marcarlas como "Correcta", "Duda" o "Incorrecta", y botones para "Saltar" y "Descargar .csv".

Paso 1: Título
Idearium
Consultores


Paso 1: Áreas de salud
3 carto.areas_salud carto [null] shape https://idearagon.arag... objectid carto.area_salud_test zona_salud


Paso 2: Áreas de salud con filtro
4 carto.areas_salud carto codigo='12' shape https://idearagon.arag... objectid area_salud12_test zona_salud


Paso 3: Ejes horizontales
5 carto.v111_ejes_horizo... carto [null] shape https://idearagon.arag.. objectid carto.test_v111_ejes_horizontales etiqueta


Paso 4: Ejes 500 geoms
6 carto.v111_ejes_500ge... carto [null] shape https://idearagon.arag... objectid carto.test_v111_ejes_500geoms via_loc


Paso 5: Aeros funcionamiento
7 geopub.v_aeros_funcio... idearagon [null] shape https://idearagondes.a... objectid carto.test_v_aeros_funcionamiento parque


Paso 6: Nga entidad con filtro
8 carto.v102_nga_entidad carto etiqueta like 'Castillo%' shape https://idearagondes.a... objectid carto.test_v102_nga_entidades_CASTILLOS etiqueta


Paso 7: Instituciones sanitarias
9 geoext.inst_sanitarias idearagon NOT EXISTS ( shape https://idearagondes.a... objectid carto.test_inst_sanitarias nombre_centro


Paso 8: Ríos
10 public.v_rios_ngaentid... idearagon [null] geom_combinada https://idearagondes.a... id carto.test_v_rios_ngaentidad3 nombre_rio


Paso 1: Seleccionar capa
Capa
carto.v102_nga_entidad(etiqueta like 'Castillo%')
carto.v102_nga_entidad(etiqueta like 'Castillo%')
public.v_rios_ngaentidad3
geopub.v_aeros_funcionamiento
carto.v111_ejes_500geoms
carto.v111_ejes_horizontales
carto.areas_salud(codigo='12')
carto.areas_salud
geoext.inst_sanitarias(NOT EXISTS (SELECT * FROM georca.v112_nucleos WHERE ST_Intersects(d.shape, georca.v112_nucleos.shape)))
Selecciona la capa "geopub.v_aeros_funcionamiento" en el desplegable.

Paso 2: Iniciar test
Iniciar test
Haz clic en el botón "Iniciar test".

Paso 1: Revisar tabla
test_id [PK] integer, pk [PK] character varying, correcta boolean, usuario character varying, fecha timestamp without time zone
1 7 61835 true msoguerog@ext.aragon.es 2025-02-26 13:04:17.793904
2 7 60262 true msoguerog@ext.aragon.es 2025-02-26 13:04:13.268293
3 7 59933 true msoguerog@ext.aragon.es 2025-02-26 10:49:41.201445
4 7 60294 true msoguerog@ext.aragon.es 2024-12-03 12:26:25.950506
5 7 66344 true msoguerog@ext.aragon.es 2024-12-03 12:26:21.41543
6 7 60004 true msoguerog@ext.aragon.es 2024-12-03 12:26:20.112721
7 7 60959 true msoguerog@ext.aragon.es 2024-12-03 12:26:18.493377
8 7 61395 true msoguerog@ext.aragon.es 2024-12-03 12:26:16.805928
9 7 60636 true msoguerog@ext.aragon.es 2024-12-03 12:26:14.748417
10 7 73109 true msoguerog@ext.aragon.es 2024-12-03 12:26:13.187945
11 7 61968 true msoguerog@ext.aragon.es 2024-12-03 12:26:09.977394
12 7 59768 true msoguerog@ext.aragon.es 2024-12-03 12:26:06.792432
13 7 61811 true msoguerog@ext.aragon.es 2024-12-03 12:26:00.381132
14 7 60373 true msoguerog@ext.aragon.es 2024-12-03 12:25:53.897511