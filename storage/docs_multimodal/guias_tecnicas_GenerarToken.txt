Generación token para obtención de log en servicios igear – ejemplo gcgEn este documento se explicará cómo generar un token de acceso mediante la autenticación en el sistema, y cómo utilizar dicho token para extraer los logs del servicio GCG de manera segura y eficiente.A esta URL https://idearagondes.aragon.es/gcg/logs? token= se le debe añadir un token como mecanismo de autentificación.Para ello debemos logearnos en cualquier servicio o aplicación del IGEAR, en este caso se va a entrar en el visor2dPulsar la tecla F12, y ir a la pestaña Network, haz clic con el botón derecho del ratón sobre la url, ir a payload y copiar directamente el valor de token. Una vez que tenemos esto ya podemos completar nuestra petición y solo faltaría escribirla en un explorador.https://idearagondes.aragon.es/gcg/logs? token=eyJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE3MjI0MDk5NzUsImlzcyI6Imh0dHBzOi8vaWRlYXJhZ29uZGVzLmFyYWdvbi5lcy92aXNvci8iLCJhY3Rpdm8iOnRydWUsInN1YiI6InNyZXZpbGxhQGFyYWdvbi5lcyIsIlJPTF9HX0RFU0NBUkdBUyI6InRydWUiLCJST0xfR19SQVNURVJfRURJVE9SIjoidHJ1ZSIsIkxEQVAiOiJ0cnVlIiwiUk9MX0FfTE9HIjoidHJ1ZSIsIlJPTF9HX0dDRyI6InRydWUiLCJST0xfR19HRU9EQVRPU19DQVJUTyI6InRydWUiLCJST0xfR19HRU9EQVRPU19BRE1JTiI6InRydWUiLCJST0xfR19HREwiOiJ0cnVlIiwiUk9MX0dfQ0FUQUxPR08iOiJ0cnVlIiwiUk9MX0dfR0VPREFUT1MiOiJ0cnVlIiwiUk9MX0dfTUVUQURBVE9TIjoidHJ1ZSIsIlJPTF9HX1JDQSI6InRydWUiLCJST0xfQV9VU1VBUklPUyI6InRydWUiLCJST0xfR19SQVNURVIiOiJ0cnVlIiwiZXhwIjoxNzIyNDQ1OTc1fQ.8FFGHgNNWaleZngaqgEu83jY0MVc2B5sNkATFTrwCDgEs importante señalar que el token debe generarse en un entorno correspondiente al uso previsto: un token de desarrollo debe generarse en un servicio de desarrollo, y un token de producción en uno de producción. Si hay alguna discrepancia entre los entornos, el token no será válido. Además, es necesario renovar este token diariamente.

Paso 1: Abrir la página del visor
idearagondes.aragon.es/visor/
Navega a la URL idearagondes.aragon.es/visor/ en tu navegador web.

Paso 2: Iniciar sesión
Correo electrónico
srevilla@aragon.es
Contraseña
¿Olvidó su contraseña?
Iniciar Sesión
Registrarse
Introduce tu correo electrónico y contraseña en los campos correspondientes. Si has olvidado tu contraseña, haz clic en "¿Olvidó su contraseña?". Si no tienes una cuenta, haz clic en "Registrarse".

Paso 3: Acceder al visor
VISOR 2D
Una vez iniciada la sesión, tendrás acceso al visor 2D.

Paso 1: Título del paso 1
Idearium
Consultores
Descripción del paso 1

Paso 1: Sin información de imagen
No se proporcionó ninguna captura de pantalla o imagen.
No se puede extraer texto de una captura de pantalla que no se ha proporcionado.

Paso 1: Título de la imagen
Idearium Consultores
No se proporcionan instrucciones o pasos en la imagen.

Paso 1: Paso 1
Idearium
None

Paso 1: Abrir DevTools
DevTools is now available in Spanish! Always match Chrome's language Switch DevTools to Spanish Don't show again
Abre las herramientas de desarrollador de Chrome.

Paso 2: Ir a la pestaña Network
Elements Console Sources Network Performance Memory Application Security Lighthouse
Selecciona la pestaña "Network".

Paso 3: Encontrar la solicitud
Name data:image/svg+xml;... data:image/svg+xml;... data:image/svg+xml;... data:image/svg+xml;... data:image/svg+xml;... data:image/svg+xml;... ui-icons_444444_256x240.png saveTOC.jsp?token=eyJhbGciO... ZI_LaminasZFP.png ZI_LaminasZFP.png wms.aspx?SERVICE=WMS&VE... wms.aspx?SERVICE=WMS&VE...
Localiza la solicitud "saveTOC.jsp".

Paso 4: Inspeccionar la carga útil
Headers Payload Preview Response Initiator Timing Cookies Query String Parameters view source view URL-encoded token: eyJhbGciOiJIUzI1NiJ9.eyJpYXQi0jE3MjI0MjE4MjMsImlzcyI6Imh0dHBzOi8vaWR1YXJhZ29uLmFyYWdvbi51cy92aXNvci8iLCJhY3Rpdm 8i0nRydWUsInN1YiI6InNyZXZpbGxhQGFyYWdvbi5lcyIsI1JPTF9HX0dDRyI6InRydWUiLCJST0xfR19HREwiOiJ0cnVlIiwiTERBUCI6InRydWUiLCJ1 eHAiOjE3MjI0NTc4MjN9.aytcMCf_J01AdbymKOC8a0NohIoOR3uZiX9un142FoM toc: {"capas": [{"layer_id":"15", "visible":true}, {"layer_id": "16", "visible":true}, {"layer_id": "134", "visible":true},{"la yer_id": "17", "visible":true}, {"layer_id": "18", "visible":true}, {"layer_id": "28", "visible":true}, {"layer_id": "477", "visi ble":true}, {"layer_id": "476", "visible":false}, {"layer_id": "25", "visible":true}, {"layer_id": "543", "visible":true}, {"lay er_id": "1022","visible": "f"},{"layer_id": "804","visible": "f"},{"layer_id": "102", "visible": "f"},{"layer_id": "1019", "vis ible": "f"}]} app: VISOR2D
Examina los "Query String Parameters" para ver el valor del parámetro "toc".